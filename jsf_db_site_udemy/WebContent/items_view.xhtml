<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:p="http://primefaces.org/ui">
      
      <h:body>
      
      	<ui:composition template="/templates/template.xhtml">
      	
      		<ui:define name="content">
      		
      			<c:if test="${item.success == 1}">
      				<div class="success">You have successfully saved your entry!</div>
      			</c:if>
      			
      			<c:if test="${item.success == -1}">
      				<div class="error">An error has occured!</div>
      			</c:if>
      			
      			<h1>Items <br /><a href="items_edit.xhtml" class="lab_btn">Add new</a></h1>
      			
      			<!-- <a href="javascript:;" class="filter-toggle">View settings</a>-->
      		
      			<h:form>
      				<div class="table-wrapper">
      					<input type="hidden" id="table" value="items" />
      					<table class="list">
      						<thead>
      							<tr>
      								<th class="naslov"><a href="items_view.xhtml?order=title1">Title</a></th>
      								<th>Category</th>
      								<th><a href="items_view.xhtml?order=date1">Date</a></th>
      								<th class="image">Image</th>
      							</tr>
      						</thead>
      						
      						<tbody>
      							<ui:repeat value="#{item.getItemListAll()}" var="it">
      								<tr id="row_#{it.id}">
      									<td class="naslov">
      										<a href="items_edit.xhtml?action=update&amp;id=#{it.id}"><h:outputText value="#{it.title_hr}" maxlength="100" /></a>
      										<div class="opcije">
      											<a href="items_edit.xhtml?action=update&amp;id=#{it.id}" class="edit" title="Edit"><img src="images/icon-edit.png" alt="Edit" /></a>
      											<p:commandLink class="delete" title="Delete" actionListener="#{item.deleteData(it.id)}" onclick="if(!confirm('Are you sure you want to delete entry?')) return false;" oncomplete="$('#row_#{it.id}').fadeOut();">
      												<p:ajax execute="@form" render="@form" />
      												<img src="images/icon-delete.png" alt="Delete" />
      											</p:commandLink>
      										</div>
      									</td>
      									<td><h:outputText value="#{it.cat_title}" maxlength="100"></h:outputText></td>
      									<td><h:outputText value="#{it.created_date}" maxlength="100"></h:outputText></td>
      									<td class="image">
      										<a href="items_edit.xhtml?action=update&amp;id=#{it.id}">
      											<img src="images/default.jpg" width="40" alt="" />
      										</a>
      									</td>
      								</tr>
      							</ui:repeat>
      						
      						</tbody>
      						
      					</table>
      				</div>
      			</h:form>
      		
      		</ui:define>
      	
      	</ui:composition>
      
      </h:body>
      
</html>